<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>T·∫°o b√†i h·ªçc - L·ªõp 5/4</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">

<style>
.editor {
  min-height: 300px;
}
.editor:focus {
  outline: none;
}
</style>
</head>

<body class="bg-[#fcfbf8] font-sans">

<!-- HEADER -->
<header class="bg-yellow-400 p-4 font-bold text-lg">
  ‚úçÔ∏è T·∫†O B√ÄI H·ªåC ‚Äì L·ªöP 5/4 | GV: L√™ Th√†nh Long
</header>

<!-- MAIN -->
<main class="max-w-5xl mx-auto p-6 space-y-4">

<!-- TH√îNG TIN B√ÄI -->
<div class="bg-white p-4 rounded-xl shadow space-y-3">
  <input id="lessonTitle" class="w-full p-2 border rounded" placeholder="üìò T√™n b√†i h·ªçc">
  <input id="lessonDesc" class="w-full p-2 border rounded" placeholder="üìù M√¥ t·∫£ ng·∫Øn">
</div>

<!-- TOOLBAR -->
<div class="bg-white p-2 rounded-xl shadow flex gap-2 flex-wrap">
  <button onclick="format('bold')" title="ƒê·∫≠m">
    <span class="material-symbols-outlined">format_bold</span>
  </button>
  <button onclick="format('italic')" title="Nghi√™ng">
    <span class="material-symbols-outlined">format_italic</span>
  </button>
  <button onclick="insertImage()" title="Ch√®n ·∫£nh">
    <span class="material-symbols-outlined">image</span>
  </button>
  <button onclick="insertVideo()" title="Ch√®n video YouTube">
    <span class="material-symbols-outlined">movie</span>
  </button>
  <button onclick="insertPPT()" title="Ch√®n PPT Google Slides">
    <span class="material-symbols-outlined">co_present</span>
  </button>
  <button onclick="insertQuestion()" title="Ch√®n c√¢u h·ªèi">
    <span class="material-symbols-outlined">quiz</span>
  </button>
</div>

<!-- EDITOR -->
<div id="editor" contenteditable="true"
     class="editor bg-white p-4 rounded-xl shadow space-y-2">
  <p>‚úèÔ∏è Nh·∫≠p n·ªôi dung b√†i h·ªçc t·∫°i ƒë√¢y...</p>
</div>

<!-- ACTIONS -->
<div class="flex gap-4">
  <button onclick="previewLesson()"
    class="px-4 py-2 bg-blue-500 text-white rounded-xl">
    üëÄ Xem tr∆∞·ªõc
  </button>

  <button onclick="exportLesson()"
    class="px-4 py-2 bg-green-600 text-white rounded-xl">
    üíæ Xu·∫•t b√†i h·ªçc (HTML)
  </button>
</div>

</main>

<!-- SCRIPT -->
<script>
function format(cmd) {
  document.execCommand(cmd, false, null);
}

function insertHTML(html) {
  document.execCommand("insertHTML", false, html);
}

function insertImage() {
  const url = prompt("D√°n link ·∫£nh:");
  if (url) insertHTML(`<img src="${url}" class="my-4 rounded-xl max-w-full">`);
}

function insertVideo() {
  const url = prompt("D√°n link YouTube:");
  if (!url) return;
  const id = url.split("v=")[1]?.split("&")[0];
  if (!id) return alert("Link kh√¥ng h·ª£p l·ªá");
  insertHTML(`
    <iframe class="my-4"
      width="100%" height="360"
      src="https://www.youtube.com/embed/${id}"
      allowfullscreen>
    </iframe>
  `);
}

function insertPPT() {
  const url = prompt("D√°n link Google Slides:");
  const match = url?.match(/presentation\/d\/([a-zA-Z0-9-_]+)/);
  if (!match) return alert("Link kh√¥ng h·ª£p l·ªá");
  insertHTML(`
    <iframe class="my-4"
      src="https://docs.google.com/presentation/d/${match[1]}/embed"
      width="100%" height="480"
      allowfullscreen>
    </iframe>
  `);
}

function insertQuestion() {
  insertHTML(`
    <div class="p-3 my-4 border-l-4 border-yellow-400 bg-yellow-50">
      ‚ùì <strong>C√¢u h·ªèi:</strong><br>
      <input class="border p-1 w-full mt-2" placeholder="Nh·∫≠p c√¢u h·ªèi...">
    </div>
  `);
}

function previewLesson() {
  const win = window.open("", "_blank");
  win.document.write(`
    <html><head>
    <meta charset="utf-8">
    <script src="https://cdn.tailwindcss.com"></script>
    </head>
    <body class="bg-[#fcfbf8] p-6">
      <h1 class="text-3xl font-bold mb-2">${lessonTitle.value}</h1>
      <p class="mb-4">${lessonDesc.value}</p>
      ${editor.innerHTML}
    </body></html>
  `);
}

function exportLesson() {
  const html = `
<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8">
<title>${lessonTitle.value}</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#fcfbf8]">
<div class="max-w-3xl mx-auto p-6">
<h1 class="text-3xl font-bold mb-2">${lessonTitle.value}</h1>
<p class="mb-4">${lessonDesc.value}</p>
${editor.innerHTML}
</div>
</body>
</html>
  `;
  const blob = new Blob([html], {type: "text/html"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "bai-hoc.html";
  a.click();
}
</script>

</body>
</html>
