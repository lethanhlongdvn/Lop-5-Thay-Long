<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Táº¡o bÃ i há»c - Lá»›p 5/4</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">

<style>
  .editor {
    min-height: 300px;
    outline: none;
  }
</style>
</head>

<body class="bg-[#f9f8f3]">

<!-- HEADER -->
<header class="bg-yellow-400 px-6 py-4 font-bold text-lg shadow">
  âœï¸ Táº O BÃ€I Há»ŒC â€“ Lá»šP 5/4 | GV: LÃª ThÃ nh Long
</header>

<main class="max-w-5xl mx-auto p-6 space-y-4">

<!-- THÃ”NG TIN -->
<div class="bg-white p-4 rounded-xl shadow space-y-3">
  <input id="lessonTitle" class="w-full p-2 border rounded"
         placeholder="ğŸ“˜ TÃªn bÃ i há»c">
  <input id="lessonDesc" class="w-full p-2 border rounded"
         placeholder="ğŸ“ MÃ´ táº£ bÃ i há»c">
</div>

<!-- TOOLBAR -->
<div class="bg-white p-3 rounded-xl shadow flex gap-2 flex-wrap">
  <button onclick="cmd('bold')" title="Äáº­m">ğŸ…±ï¸</button>
  <button onclick="cmd('italic')" title="NghiÃªng">ğ‘°</button>
  <button onclick="addImage()">ğŸ–¼ï¸ áº¢nh</button>
  <button onclick="addVideo()">ğŸ¬ Video</button>
  <button onclick="addPPT()">ğŸ“Š PPT</button>
  <button onclick="addQuestion()">â“ CÃ¢u há»i</button>
</div>

<!-- EDITOR -->
<div id="editor" contenteditable="true"
     class="editor bg-white p-4 rounded-xl shadow">
  <p>ğŸ‘‰ Nháº­p ná»™i dung bÃ i há»c táº¡i Ä‘Ã¢y...</p>
</div>

<!-- ACTION -->
<div class="flex gap-4">
  <button onclick="preview()"
          class="px-4 py-2 bg-blue-600 text-white rounded-xl">
    ğŸ‘€ Xem trÆ°á»›c
  </button>
  <button onclick="exportHTML()"
          class="px-4 py-2 bg-green-600 text-white rounded-xl">
    ğŸ’¾ Xuáº¥t HTML
  </button>
</div>

</main>

<script>
const editor = document.getElementById("editor");

function focusEditor() {
  editor.focus();
}

function cmd(command) {
  focusEditor();
  document.execCommand(command, false, null);
}

function insert(html) {
  focusEditor();
  document.execCommand("insertHTML", false, html);
}

function addImage() {
  const url = prompt("DÃ¡n link áº£nh:");
  if (!url) return;
  insert(`<img src="${url}" class="my-4 rounded-xl max-w-full">`);
}

function addVideo() {
  const url = prompt("DÃ¡n link YouTube:");
  if (!url) return;

  const id = url.includes("v=")
    ? url.split("v=")[1].split("&")[0]
    : url.split("/").pop();

  insert(`
    <iframe class="my-4"
      width="100%" height="360"
      src="https://www.youtube.com/embed/${id}"
      allowfullscreen>
    </iframe>
  `);
}

function addPPT() {
  const url = prompt("DÃ¡n link Google Slides:");
  if (!url) return;

  const match = url.match(/presentation\/d\/([^/]+)/);
  if (!match) {
    alert("Link Google Slides khÃ´ng há»£p lá»‡");
    return;
  }

  insert(`
    <iframe class="my-4"
      src="https://docs.google.com/presentation/d/${match[1]}/embed"
      width="100%" height="480"
      allowfullscreen>
    </iframe>
  `);
}

function addQuestion() {
  insert(`
    <div class="my-4 p-3 border-l-4 border-yellow-400 bg-yellow-50">
      <strong>â“ CÃ¢u há»i:</strong>
      <input class="w-full mt-2 p-2 border rounded"
             placeholder="Nháº­p cÃ¢u há»i cho há»c sinh...">
    </div>
  `);
}

function preview() {
  const win = window.open("", "_blank");
  win.document.write(`
<!DOCTYPE html>
<html><head>
<meta charset="utf-8">
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#f9f8f3] p-6">
<h1 class="text-3xl font-bold">${lessonTitle.value}</h1>
<p class="mb-4">${lessonDesc.value}</p>
${editor.innerHTML}
</body></html>
  `);
}

function exportHTML() {
  const html = `
<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>${lessonTitle.value}</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#f9f8f3]">
<div class="max-w-3xl mx-auto p-6">
<h1 class="text-3xl font-bold">${lessonTitle.value}</h1>
<p class="mb-4">${lessonDesc.value}</p>
${editor.innerHTML}
</div>
</body>
</html>
  `;

  const blob = new Blob([html], { type: "text/html" });
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "bai-hoc.html";
  a.click();
}
</script>

</body>
</html>
